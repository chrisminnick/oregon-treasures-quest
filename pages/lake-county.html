<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Explore Oregon's hidden gems with the 2025 Oregon Treasures Quest, a county-by-county guide to must-see attractions across the state." />
  <meta name="theme-color" content="#00363b" />
  <title>Lake County - 2025 Oregon Treasures Quest</title>
  <link rel="preconnect" href="https://maps.googleapis.com" />
  <link rel="dns-prefetch" href="https://maps.googleapis.com" />
  <link rel="manifest" href="../manifest.json" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìç</text></svg>" />
  <link rel="stylesheet" href="../styles.css" />
  <style>
    #page-loader {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #00363b;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      transition: opacity 0.3s ease-out;
    }
    #page-loader.loaded {
      opacity: 0;
      pointer-events: none;
    }
    .spinner {
      width: 50px;
      height: 50px;
      border: 4px solid rgba(255, 255, 255, 0.3);
      border-top-color: #ffffff;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body class="bg-gray-50">
  <div id="page-loader">
    <div class="spinner"></div>
  </div>

  <nav class="bg-white shadow-md sticky top-0 z-50" aria-label="Main navigation">
    <div class="content-wrapper px-4 py-3">
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
        <div class="flex items-center">
          <a href="../index.html" class="text-primary hover:text-secondary font-semibold text-lg" aria-label="Home">
            üè† 2025 Oregon Treasures Quest
          </a>
        </div>
        
        <div class="flex items-center">
          <select onchange="if(this.value) window.location.href=this.value" class="px-4 py-2 border border-gray-300 rounded bg-white text-gray-800 text-sm font-medium cursor-pointer hover:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary" aria-label="Navigate to page">
            <option value="">Jump to Page...</option>
            
            <option value="baker-county.html" >
              Baker County
            </option>
            <option value="benton-county.html" >
              Benton County
            </option>
            <option value="clackamas-county.html" >
              Clackamas County
            </option>
            <option value="clatsop-county.html" >
              Clatsop County
            </option>
            <option value="columbia-county.html" >
              Columbia County
            </option>
            <option value="coos-county.html" >
              Coos County
            </option>
            <option value="crook-county.html" >
              Crook County
            </option>
            <option value="curry-county.html" >
              Curry County
            </option>
            <option value="deschutes-county.html" >
              Deschutes County
            </option>
            <option value="douglas-county.html" >
              Douglas County
            </option>
            <option value="gilliam-county.html" >
              Gilliam County
            </option>
            <option value="grant-county.html" >
              Grant County
            </option>
            <option value="harney-county.html" >
              Harney County
            </option>
            <option value="hood-river-county.html" >
              Hood River County
            </option>
            <option value="jackson-county.html" >
              Jackson County
            </option>
            <option value="jefferson-county.html" >
              Jefferson County
            </option>
            <option value="josephine-county.html" >
              Josephine County
            </option>
            <option value="klamath-county.html" >
              Klamath County
            </option>
            <option value="lake-county.html" selected>
              Lake County
            </option>
            <option value="lane-county.html" >
              Lane County
            </option>
            <option value="lincoln-county.html" >
              Lincoln County
            </option>
            <option value="linn-county.html" >
              Linn County
            </option>
            <option value="malheur-county.html" >
              Malheur County
            </option>
            <option value="marion-county.html" >
              Marion County
            </option>
            <option value="morrow-county.html" >
              Morrow County
            </option>
            <option value="multnomah-county.html" >
              Multnomah County
            </option>
            <option value="polk-county.html" >
              Polk County
            </option>
            <option value="sherman-county.html" >
              Sherman County
            </option>
            <option value="tillamook-county.html" >
              Tillamook County
            </option>
            <option value="umatilla-county.html" >
              Umatilla County
            </option>
            <option value="union-county.html" >
              Union County
            </option>
            <option value="wallowa-county.html" >
              Wallowa County
            </option>
            <option value="wasco-county.html" >
              Wasco County
            </option>
            <option value="washington-county.html" >
              Washington County
            </option>
            <option value="wheeler-county.html" >
              Wheeler County
            </option>
            <option value="yamhill-county.html" >
              Yamhill County
            </option>
          </select>
        </div>
      </div>
    </div>
  </nav>

  <nav class="content-wrapper px-4 py-3 text-sm" aria-label="Breadcrumb">
    <ol class="flex items-center space-x-2 text-gray-600">
      <li>
        <a href="../index.html" class="hover:text-secondary">Home</a>
      </li>
      <li class="flex items-center">
        <span class="mx-2">/</span>
        <span class="text-gray-800 font-semibold">Lake County</span>
      </li>
    </ol>
  </nav>

<main class="content-wrapper px-4 py-6">
  <article class="bg-white rounded-lg shadow-md overflow-hidden mb-8">
    <div class="bg-primary page-header bg-gradient-to-r from-primary to-secondary text-white p-6 md:p-8">
      <h1 class="text-3xl md:text-4xl font-bold mb-2">
        Lake County
      </h1>
      <p class="text-xl md:text-2xl opacity-90">
        Fort Rock
      </p>
    </div>

    
    <div class="page-image">
      <img
        src="../images/Image_063.jpg"
        alt="Fort Rock State Natural Area"
        class="w-full h-auto"
        fetchpriority="high"
        decoding="async"
      />
      <p class="text-sm text-gray-600 italic px-6 py-2 bg-gray-50">Fort Rock State Natural Area in Lake County. (Source: Team Merkley)</p>
    </div>
    

    
    <div class="primary-content p-6 md:p-8">
      <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-4">
        Fort Rock
      </h2>
      <div class="text-gray-700 leading-relaxed space-y-4">
        <p>Jutting out amid the barren and flat landscape of the Oregon High Desert, Fort Rock in Lake County demands to be noticed. Standing 200 feet tall and nearly 4,500 feet wide, it is believed to be the result of magma forcefully rising to the surface of a prehistoric lake. Archaeological expeditions have also unearthed countless artifacts belonging to Indigenous peoples of the region, including the famous "Fort Rock Sandals" which have been dated to more than 9,000 years old‚Äîthat's not just the oldest footwear found in Oregon, but the oldest on Earth.</p>
      </div>
    </div>
    

    
    <div class="additional-content bg-gray-50 p-6 md:p-8 border-t border-gray-200">
      <h3 class="text-xl md:text-2xl font-bold text-gray-800 mb-4">
        You May Also Want to Explore...
      </h3>
      <ul class="space-y-3">
        
        <li class="flex items-start">
          <span class="text-secondary mr-2">¬∑</span>
          <div>
            <span class="text-gray-800 font-semibold">Old Perpetual Geyser</span>
          </div>
        </li>
        
        <li class="flex items-start">
          <span class="text-secondary mr-2">¬∑</span>
          <div>
            <a href="https://www.blm.gov/visit/sunstone-collection-area" target="_blank" rel="noopener" class="text-secondary hover:underline font-semibold">Oregon Sunstone Public Collection Site</a>
          </div>
        </li>
        
        <li class="flex items-start">
          <span class="text-secondary mr-2">¬∑</span>
          <div>
            <a href="http://cityofpaisley.net/" target="_blank" rel="noopener" class="text-secondary hover:underline font-semibold">Historic Downtown Paisley</a>
          </div>
        </li>
        
        <li class="flex items-start">
          <span class="text-secondary mr-2">¬∑</span>
          <div>
            <a href="https://www.fws.gov/refuge/hart-mountain-national-antelope" target="_blank" rel="noopener" class="text-secondary hover:underline font-semibold">Hart Mountain National Antelope Refuge</a>
          </div>
        </li>
        
      </ul>
    </div>
    

    
    <div class="more-info p-6 md:p-8 bg-primary text-white">
      <h3 class="text-xl font-bold mb-3">More Information</h3>
      <p class="leading-relaxed">
        For more information: Visit <a href="https://stateparks.oregon.gov/" target="_blank" rel="noopener" class="underline hover:text-gray-300">stateparks.oregon.gov</a> and search "Fort Rock"
      </p>
      
    </div>
    

    
    <div class="qr-code p-6 md:p-8 bg-gray-50 border-t border-gray-200 text-center">
      <img src="../qr-codes/2025-oregon-treasures-quest-custom-qr.png" alt="QR Code for Lake County" class="mx-auto w-64 h-64" width="256" height="256" loading="lazy" decoding="async" />
      
    </div>
    
  </article>

  
  <!-- Map Section -->
  <section class="bg-white rounded-lg shadow-md overflow-hidden mb-8">
    <div id="map-container" style="height: 400px; width: 100%;"></div>
  </section>
  

  <div class="text-center py-6 text-gray-600">
    <p class="mb-2">Use the dropdown menu above to jump to another page</p>
    <a href="../index.html" class="inline-block px-6 py-3 bg-secondary text-white rounded-lg hover:bg-opacity-90 transition-colors font-semibold">
      ‚Üê Back to All Pages
    </a>
  </div>
</main>


  <script>
    async function initMap() {
      const mapContainer = document.getElementById('map-container');
      
      // Check if offline first - before loading any Google Maps code
      if (!navigator.onLine) {
        mapContainer.innerHTML = `
          <div style="text-align: center; padding: 40px 20px;">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin: 0 auto 16px; color: #9ca3af;">
              <path d="M1 1l22 22M16.72 11.06A10.94 10.94 0 0 1 19 12.55M5 12.55a10.94 10.94 0 0 1 5.17-2.39M10.71 5.05A16 16 0 0 1 22.58 9M1.42 9a15.91 15.91 0 0 1 4.7-2.88M8.53 16.11a6 6 0 0 1 6.95 0M12 20h.01"></path>
            </svg>
            <h3 style="margin: 0 0 8px; font-size: 18px; font-weight: 600; color: #374151;">No Internet Connection</h3>
            <p style="margin: 0; color: #6b7280; font-size: 14px;">The map is not available while offline.<br>Connect to the internet to view locations.</p>
          </div>
        `;
        return;
      }

      // Load Google Maps API dynamically only when online
      if (!window.google || !window.google.maps) {
        await new Promise((resolve, reject) => {
          (g=>{var h,a,k,p="The Google Maps JavaScript API",c="google",l="importLibrary",q="__ib__",m=document,b=window;b=b[c]||(b[c]={});var d=b.maps||(b.maps={}),r=new Set,e=new URLSearchParams,u=()=>h||(h=new Promise(async(f,n)=>{await (a=m.createElement("script"));e.set("libraries",[...r]+"");for(k in g)e.set(k.replace(/[A-Z]/g,t=>"_"+t[0].toLowerCase()),g[k]);e.set("callback",c+".maps."+q);a.src=`https://maps.googleapis.com/maps/api/js?`+e;d[q]=f;a.onerror=()=>h=n(Error(p+" could not load."));a.nonce=m.querySelector("script[nonce]")?.nonce||"";m.head.append(a)}));d[l]?console.warn(p+" only loads once. Ignoring:",g):d[l]=(f,...n)=>r.add(f)&&u().then(()=>d[l](f,...n))})({
            key: "AIzaSyBjy8jrq0thxr3_lKfykb7LV1cVz2TBBwc",
            v: "weekly",
          });
          // Wait a bit for the loader to initialize
          setTimeout(resolve, 100);
        });
      }

      const locations = [{ lat: 43.3647, lng: -121.0633, title: "Lake County", url: "lake-county.html" }];

      if (locations.length === 0) return;

      try {
        // Load required libraries
        const { Map, InfoWindow } = await google.maps.importLibrary("maps");
      const { AdvancedMarkerElement } = await google.maps.importLibrary("marker");

      
      // Single page map - center on location
      const map = new Map(document.getElementById('map-container'), {
        center: { lat: locations[0].lat, lng: locations[0].lng },
        zoom: 12,
        mapId: 'wayfinder-map'
      });

      // Add single marker
      const marker = new AdvancedMarkerElement({
        map: map,
        position: { lat: locations[0].lat, lng: locations[0].lng },
        title: locations[0].title
      });
      
      } catch (error) {
        console.error('Map loading error:', error);
        const mapContainer = document.getElementById('map-container');
        mapContainer.innerHTML = `
          <div style="text-align: center; padding: 40px 20px;">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin: 0 auto 16px; color: #9ca3af;">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="8" x2="12" y2="12"></line>
              <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
            <h3 style="margin: 0 0 8px; font-size: 18px; font-weight: 600; color: #374151;">Map Unavailable</h3>
            <p style="margin: 0; color: #6b7280; font-size: 14px;">The map could not be loaded at this time.<br>Please check your internet connection.</p>
          </div>
        `;
      }
    }

    // Defer map initialization until after page load
    if (document.readyState === 'loading') {
      window.addEventListener('DOMContentLoaded', initMap);
    } else {
      // Use requestIdleCallback for better performance, fallback to setTimeout
      if ('requestIdleCallback' in window) {
        requestIdleCallback(initMap);
      } else {
        setTimeout(initMap, 1);
      }
    }
  </script>

  <script>
    // Hide loading spinner when page is ready
    function hideLoader() {
      const loader = document.getElementById('page-loader');
      if (loader) {
        loader.classList.add('loaded');
        setTimeout(() => loader.remove(), 300);
      }
    }
    
    if (document.readyState === 'loading') {
      window.addEventListener('DOMContentLoaded', hideLoader);
    } else {
      hideLoader();
    }
  </script>
  <script>
    // Register service worker for offline support
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then((registration) => {
            console.log('Service Worker registered:', registration.scope);
            
            // Show notification when installing (first visit) or waiting (update)
            const worker = registration.installing || registration.waiting;
            if (worker) {
              console.log('Service worker installing/waiting, showing notification');
              showCachingNotification();
              worker.addEventListener('statechange', (e) => {
                console.log('Service worker state changed:', e.target.state);
                if (e.target.state === 'activated') {
                  hideCachingNotification();
                  showConnectionStatus('cached');
                }
              });
            }
            
            // Listen for messages from the service worker
            navigator.serviceWorker.addEventListener('message', (event) => {
              console.log('Message from SW:', event.data);
              if (event.data.type === 'CACHE_COMPLETE') {
                hideCachingNotification();
                showConnectionStatus('cached');
              }
            });
          })
          .catch((error) => {
            console.log('Service Worker registration failed:', error);
          });
      });
    }

    // Show caching progress notification
    function showCachingNotification() {
      const notice = document.createElement('div');
      notice.id = 'caching-notice';
      notice.style.cssText = `
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: #3b82f6;
        color: white;
        padding: 16px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        z-index: 10000;
        font-size: 14px;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 12px;
      `;
      notice.innerHTML = `
        <div class="spinner-small" style="
          width: 20px;
          height: 20px;
          border: 3px solid rgba(255, 255, 255, 0.3);
          border-top-color: #ffffff;
          border-radius: 50%;
          animation: spin 0.8s linear infinite;
        "></div>
        <span>Preparing site for offline use...</span>
      `;
      document.body.appendChild(notice);
    }

    function hideCachingNotification() {
      const notice = document.getElementById('caching-notice');
      if (notice) {
        notice.style.animation = 'fadeOut 0.3s ease-out';
        setTimeout(() => notice.remove(), 300);
      }
    }

    // Show notification when going offline/online
    function showConnectionStatus(status) {
      const existingNotice = document.getElementById('connection-notice');
      if (existingNotice) existingNotice.remove();

      const isOnline = status === true || status === 'cached';
      const isCached = status === 'cached';
      
      const notice = document.createElement('div');
      notice.id = 'connection-notice';
      notice.style.cssText = `
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: ${isOnline ? '#10b981' : '#f59e0b'};
        color: white;
        padding: 12px 24px;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        z-index: 10000;
        font-size: 14px;
        font-weight: 500;
        animation: slideDown 0.3s ease-out;
      `;
      notice.textContent = isCached
        ? '‚úì Site ready for offline use!'
        : (isOnline 
          ? '‚úì Back online' 
          : '‚ö† You\'re offline - some features may be limited');
      
      document.body.appendChild(notice);
      
      setTimeout(() => {
        notice.style.animation = 'slideUp 0.3s ease-out';
        setTimeout(() => notice.remove(), 300);
      }, isCached ? 3000 : (isOnline ? 2000 : 5000));
    }

    window.addEventListener('online', () => showConnectionStatus(true));
    window.addEventListener('offline', () => showConnectionStatus(false));

    // Add CSS animations
    const style = document.createElement('style');
    style.textContent = `
      @keyframes slideDown {
        from { transform: translateX(-50%) translateY(-100%); opacity: 0; }
        to { transform: translateX(-50%) translateY(0); opacity: 1; }
      }
      @keyframes slideUp {
        from { transform: translateX(-50%) translateY(0); opacity: 1; }
        to { transform: translateX(-50%) translateY(-100%); opacity: 0; }
      }
    `;
    document.head.appendChild(style);
  </script>
  <footer class="bg-primary text-white mt-12">
    <div class="content-wrapper px-4 py-8">
      <div class="text-center">
        <p class="mb-2">2025 Oregon Treasures Quest</p>
        <p class="text-sm opacity-75">Explore Oregon's hidden gems with the 2025 Oregon Treasures Quest, a county-by-county guide to must-see attractions across the state.</p>
      </div>
    </div>
  </footer>
</body>
</html>